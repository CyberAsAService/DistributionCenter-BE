@startuml
[*] --> Created
[*] --> Failed: Failed to create
Created --> QueuedForPermissions
Created --> QueuedForExecute: Requested to skip permissions
QueuedForPermissions --> Permissions
Created --> Permissions: Permission task already running
Permissions --> QueuedForExecute: Success
Permissions --> UpForRetryPermissions: Fail
Permissions --> Failed: Fail after x times


QueuedForExecute --> Execute
Execute --> Finished: Success
Execute --> UpForRetryExecution: Fail
Execute --> Failed: Fail after x times

UpForRetryExecution --> QueuedForExecute : If execution failed
UpForRetryPermissions --> QueuedForPermissions : If Permissions failed

Finished --> [*]
Failed--> [*]
@enduml